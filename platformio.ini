; PlatformIO Project Configuration File
; M5Paper S3 Multi-Feature Power Bank Display & Smart Assistant
;
; Build: pio run
; Upload: pio run -t upload
; Monitor: pio run -t monitor

[env:m5paper_s3]
platform = espressif32
board = m5stack-stamps3
framework = arduino

; ESP32-S3 specific settings
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

; Memory settings for M5Paper S3
board_build.partitions = huge_app.csv
board_upload.flash_size = 16MB
board_build.arduino.memory_type = qio_opi

; Monitor settings
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags
build_flags = 
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DM5PAPER_S3
    ; Optimize for size
    -Os

; Libraries
lib_deps = 
    ; M5Stack libraries
    m5stack/M5Unified@^0.1.16
    m5stack/M5GFX@^0.2.0
    ; BLE (lighter weight)
    h2zero/NimBLE-Arduino@^1.4.2
    ; JSON parsing
    bblanchon/ArduinoJson@^7.0.0
    ; SD card
    SD
    ; TinyXML2 for EPUB - will add later when implementing e-reader

; Extra library storage options
lib_extra_dirs = 
    lib

; Upload settings
upload_speed = 921600

; Debugging
build_type = debug
debug_tool = esp-builtin
